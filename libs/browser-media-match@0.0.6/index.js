(function (global, factory) { if (typeof define === "function" && define.amd) { define("CGBrowserMediaMatch", ["exports"], factory) } else if (typeof exports !== "undefined") { factory(exports) } else { var mod = { exports: {} }; factory(mod.exports); global.CGBrowserMediaMatch = mod.exports } })(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports) { "use strict"; Object.defineProperty(_exports, "__esModule", { value: true }); _exports.checkImageFormatSupport = _exports.EMediaMatch = void 0; function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o }, _typeof(o) } var C = _exports.EMediaMatch = function (r) { return r[r.AVIF = 1] = "AVIF", r[r.WEBP = 2] = "WEBP", r[r.AVIF_STATIC_WEBP_ANIMATED = 3] = "AVIF_STATIC_WEBP_ANIMATED", r[r.UNSUPPORTED = 4] = "UNSUPPORTED", r }(C || {}); var h = { mobile: { Chrome: 85, Firefox: 132, Safari: { min: 16, max: 100 }, Opera: 80 }, pc: { Chrome: 85, Edge: 121, Safari: { min: 16.1, max: 16.3 }, Firefox: { min: 93, max: 112 }, Opera: 71 } }, a = { mobile: { Chrome: 131, Firefox: 132, Safari: 14, Opera: 12 }, pc: { Chrome: 32, Edge: 18, Safari: 14, Firefox: 65, Opera: 19 } }, F = function F() { var r = navigator.userAgent, e = r.includes("Opera"); return e ? "Opera" : r.includes("compatible") && r.includes("MSIE") && !e ? "IE" : r.includes("Edge") ? "Edge" : r.includes("Firefox") ? "Firefox" : r.includes("Safari") && !r.includes("Chrome") ? "Safari" : r.includes("Chrome") && r.includes("Safari") && !r.includes("Edge") ? "Chrome" : "" }, S = function S(r, e) { var t = new Image; t.onload = function () { r(t.width > 0 && t.height > 0) }, t.onerror = function () { r(!1) }, t.src = "data:image/".concat(e, ";base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==") }, g = function g(r) { S(function (e) { if (e) return r(1); S(function (t) { return r(t ? 2 : 4) }, "webp") }, "avif") }, l = _exports.checkImageFormatSupport = function l(r) { var e = navigator.userAgent, t = /Mobi/i.test(e), o = F(); if (!o) return g(r); if (o === "IE") return 4; function m() { var s = (t ? h.mobile : h.pc)[o]; if (_typeof(s) == "object") { var n = s.min, u = s.max, c = e.match(/OS ([\d_]+)/i); if (!c) return 4; var f = Number.parseFloat(c[1].split("_").map(function (I) { return Number.parseInt(I, 10) }).join(".")); switch (!0) { case f >= n && f < u: return 3; case f >= u: return 1; default: return 4 } } else { var _n = e.match(/Chrome\/(\d+\.\d+)/); return _n && Number.parseFloat(_n[1]) >= s ? 1 : 4 } } function A() { var s = (t ? a.mobile : a.pc)[o]; if (o === "Safari") { var u = e.match(/OS ([\d_]+)/i); if (u) { var c = u[1].split("_").map(function (f) { return Number.parseInt(f, 10) }).join("."); return Number.parseFloat(c) >= a.mobile.Safari ? 2 : 4 } } var n = e.match(/Chrome\/(\d+\.\d+)/); return n && Number.parseFloat(n[1]) >= s ? 2 : 4 } var i = m(); if (i === 1) return r(1); var p = A(); return i === 3 && p === 2 ? r(3) : p === 2 ? r(2) : i === 4 || p === 4 ? g(r) : r(i) } });